option_settings:
  # Configure instance type to t3.micro (free tier eligible)
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.micro
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
    
  # Configure Java platform settings
  aws:elasticbeanstalk:container:java:
    Xmx: 512m
    JVM Options: '-Xms256m -XX:MaxMetaspaceSize=128m'
    
  # Configure health check
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health
    
  # Configure environment properties
  aws:elasticbeanstalk:application:environment:
    SERVER_PORT: 5000
    JAVA_TOOL_OPTIONS: '-Djava.security.egd=file:/dev/./urandom'
    
  # Configure auto-scaling (single instance for cost savings)
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 1
    
  # Configure load balancer (using Application Load Balancer)
  aws:elasticbeanstalk:environment:
    EnvironmentType: SingleInstance
    ServiceRole: aws-elasticbeanstalk-service-role